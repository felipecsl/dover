/*
	Queue Plug-in
	
	Features:
		*Adds a cancelQueue() method for cancelling the entire queue.
		*All queued files are uploaded when startUpload() is called.
		*If false is returned from uploadComplete then the queue upload is stopped.
		 If false is not returned (strict comparison) then the queue upload is continued.
		*Adds a QueueComplete event that is fired when all the queued files have finished uploading.
		 Set the event handler with the queue_complete_handler setting.
		
	*/

var SWFUpload;
if (typeof SWFUpload === "function") {
	SWFUpload.queue = {}; SWFUpload.prototype.initSettings = function (a) {
		return function () {
			typeof a === "function" && a.call(this); this.queueSettings = {}; this.queueSettings.queue_cancelled_flag = false; this.queueSettings.queue_upload_count = 0; this.queueSettings.user_upload_complete_handler = this.settings.upload_complete_handler; this.queueSettings.user_upload_start_handler = this.settings.upload_start_handler; this.settings.upload_complete_handler = SWFUpload.queue.uploadCompleteHandler; this.settings.upload_start_handler =
SWFUpload.queue.uploadStartHandler; this.settings.queue_complete_handler = this.settings.queue_complete_handler || null
		} 
	} (SWFUpload.prototype.initSettings); SWFUpload.prototype.startUpload = function (a) { this.queueSettings.queue_cancelled_flag = false; this.callFlash("StartUpload", [a]) }; SWFUpload.prototype.cancelQueue = function () { this.queueSettings.queue_cancelled_flag = true; this.stopUpload(); for (var a = this.getStats(); a.files_queued > 0; ) { this.cancelUpload(); a = this.getStats() } }; SWFUpload.queue.uploadStartHandler =
function (a) { var b; if (typeof this.queueSettings.user_upload_start_handler === "function") b = this.queueSettings.user_upload_start_handler.call(this, a); b = b === false ? false : true; this.queueSettings.queue_cancelled_flag = !b; return b }; SWFUpload.queue.uploadCompleteHandler = function (a) {
	var b = this.queueSettings.user_upload_complete_handler; a.filestatus === SWFUpload.FILE_STATUS.COMPLETE && this.queueSettings.queue_upload_count++; if (typeof b === "function" ? b.call(this, a) === false ? false : true : a.filestatus === SWFUpload.FILE_STATUS.QUEUED ?
false : true) if (this.getStats().files_queued > 0 && this.queueSettings.queue_cancelled_flag === false) this.startUpload(); else { if (this.queueSettings.queue_cancelled_flag === false) this.queueEvent("queue_complete_handler", [this.queueSettings.queue_upload_count]); else this.queueSettings.queue_cancelled_flag = false; this.queueSettings.queue_upload_count = 0 } 
} 
};